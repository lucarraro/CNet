[{"path":"https://lucarraro.github.io/rivnet/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Luca Carraro. Maintainer.","code":""},{"path":"https://lucarraro.github.io/rivnet/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Carraro L (2023). rivnet: Extract Analyze Rivers Elevation Data. R package version 0.1.0, https://lucarraro.github.io/rivnet/.","code":"@Manual{,   title = {rivnet: Extract And Analyze Rivers From Elevation Data},   author = {Luca Carraro},   year = {2023},   note = {R package version 0.1.0},   url = {https://lucarraro.github.io/rivnet/}, }"},{"path":"https://lucarraro.github.io/rivnet/index.html","id":"rivnet","dir":"","previous_headings":"","what":"Extract And Analyze Rivers From Elevation Data ","title":"Extract And Analyze Rivers From Elevation Data ","text":"R-package allowing seamless extraction river networks Digital Elevation Models data.","code":""},{"path":"https://lucarraro.github.io/rivnet/index.html","id":"what-this-package-does","dir":"","previous_headings":"","what":"What this package does","title":"Extract And Analyze Rivers From Elevation Data ","text":"Analysis Digital Elevation Models, either provided externally downloaded open source repositories (latter case, interfacing elevatr package). Extraction river networks performed via TauDEM’s D8 flow direction algorithm (interfacing traudem package). Resulting river networks compatible functions OCNet package, can plotted analyzed accordingly (thus also compatible packages igraph SSN). Distances, areas, subcatchments, slopes can computed. obtained river networks can used hydrological ecological modelling studies.","code":""},{"path":"https://lucarraro.github.io/rivnet/index.html","id":"a-minimal-working-example","dir":"","previous_headings":"","what":"A minimal working example","title":"Extract And Analyze Rivers From Elevation Data ","text":"Extract river Wigger (Switzerland) externally provided DEM raster file. Outlet coordinates CH1903/LV03 projected coordinate system (.e., DEM file): result can obtained downloading DEM data via elevatr:","code":"fp <- system.file(\"extdata/wigger.tif\", package = \"rivers\")  r <- extract_river(outlet = c(637478, 237413),                       DEM = fp) r <- extract_river(outlet = c(637478, 237413),                       EPSG = 21781, #CH1903/LV03 coordinate system                       ext = c(6.2e5, 6.6e5, 2e5, 2.5e5),                       z = 8)"},{"path":"https://lucarraro.github.io/rivnet/index.html","id":"installation-issues","dir":"","previous_headings":"","what":"Installation issues","title":"Extract And Analyze Rivers From Elevation Data ","text":"rivnet depends traudem, whose installation might require caution depending operating system. Please read documentation carefully.","code":""},{"path":"https://lucarraro.github.io/rivnet/index.html","id":"author","dir":"","previous_headings":"","what":"Author","title":"Extract And Analyze Rivers From Elevation Data ","text":"Luca Carraro (maintainer)","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/aggregate_river.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate a river — aggregate_river","title":"Aggregate a river — aggregate_river","text":"Aggregates river","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/aggregate_river.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate a river — aggregate_river","text":"","code":"aggregate_river(river, ...)"},{"path":"https://lucarraro.github.io/rivnet/reference/aggregate_river.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate a river — aggregate_river","text":"river river object. ... arguments passed aggregate_OCN.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/aggregate_river.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Aggregate a river — aggregate_river","text":"alias aggregate_OCN.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/aggregate_river.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate a river — aggregate_river","text":"","code":"# \\donttest{  fp <- system.file(\"extdata/wigger.tif\", package=\"rivers\")  r <- extract_river(outlet=c(637478,237413),   DEM=fp) #> Error in taudem_exec(n_processes = n_processes, program = \"pitremove\",     args = args, quiet = quiet): ✖ Can't find TauDEM #> ℹ Refer to ?traudem::taudem_sitrep r <- aggregate_river(r)   #> Warning: RGL: unable to open X11 display #> Warning: 'rgl.init' failed, running with 'rgl.useNULL = TRUE'. #> Error in \"slope\" %in% names(OCN$FD): object 'r' not found # }"},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract a river — extract_river","title":"Extract a river — extract_river","text":"Function extracts river network elevation data via TauDEM's D8 flow direction  algorithm. can return river object /output TauDEM functions raster file. Elevation data can either downloaded web provided externally.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract a river — extract_river","text":"","code":"extract_river(outlet, EPSG=NULL, ext=NULL, z=NULL, DEM=NULL,    as.river=TRUE, as.rast=FALSE, filename=NULL, plot.rast=FALSE,   threshold_parameter=1000, n_processes=1, quiet=TRUE, src=\"aws\")"},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract a river — extract_river","text":"outlet vector, matrix data frame expressing coordinates river outlet(s)  (coordinate system identified EPSG, DEM, latter provided). vector, odd components identify longitudinal (x) coordinates,  even components latitudinal (y) coordinates. matrix, 2 columns (x  y coordinates respectively) number rows equal number outlets. data frame,  components outlet$x, outlet$y identifying respective coordinates. EPSG EPSG code identifying coordinate system used. See https://epsg.org/.  required DEM specified, used otherwise. recommended use projected coordinate systems, lengths areas river object metric units. ext Vector expressing extent region elevation data downloaded. must form c(xmin, xmax, ymin, ymax). Coordinates must expressed coordinate system identified EPSG. required DEM specified,  used otherwise. z Zoom level elevation data downloaded. See get_elev_raster  details. required DEM specified, used otherwise. DEM Filename Digital Elevation Model raster file used. .river Logical. river object created? .rast Logical. raster file containing results traudem functions output created? filename Filename raster file produced .rast=TRUE. required  .rast=TRUE. can single filename, four filenames, case four different  raster files produced. See Details. plot.rast Logical. plot calculated contributing area extracted catchment  contour produced? threshold_parameter Value passed taudem_threshold. See example `traudem`  documentation details. n_processes Value passed traudem functions. quiet Logical. FALSE console output suppressed. src Value passed get_elev_raster.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract a river — extract_river","text":"river object. See create_OCN, landscape_OCN description structure.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract a river — extract_river","text":"wrapper elevatr traudem functions, allowing seamless extraction  river networks elevation data. output river object compatible OCNet functions  (equivalent OCN produced landscape_OCN). workflow TauDEM commands used follows:  PitRemove -> D8FlowDir -> D8ContributingArea -> StreamDefByThreshold ->    MoveOutletsToStreams -> D8ContributingArea.  See https://hydrology.usu.edu/taudem/taudem5/index.html details TauDEM. .rast = TRUE, raster file returned. consists four layers: fel pit-filled elevation data p D8 flow directions ad8 contributing area whole region ssa contributing area respect outlet(s) used raster file written via terra::writeRaster. nested outlets specified, function ignores upstream outlet.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/rivnet/reference/extract_river.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract a river — extract_river","text":"","code":"# extract the river Wigger (Switzerland) from DEM raster file # outlet coordinates are expressed in the CH1903/LV03 coordinate system  # (i.e. same as the DEM file)  fp <- system.file(\"extdata/wigger.tif\", package=\"rivers\")  r <- extract_river(outlet=c(637478,237413),    DEM=fp) #> Error in taudem_exec(n_processes = n_processes, program = \"pitremove\",     args = args, quiet = quiet): ✖ Can't find TauDEM #> ℹ Refer to ?traudem::taudem_sitrep r #> Error in eval(expr, envir, enclos): object 'r' not found     # \\donttest{ # same as above but download DEM data via elevatr r <- extract_river(outlet=c(637478,237413),   EPSG=21781, #CH1903/LV03 coordinate system   ext=c(6.2e5,6.6e5,2e5,2.5e5),   z=8) #> Warning: PROJ/GDAL PROJ string degradation in workflow #>  repeated warnings suppressed #>  Discarded datum CH1903 in Proj4 definition #> Warning: PROJ support is provided by the sf and terra packages among others #> Warning: PROJ support is provided by the sf and terra packages among others #> Error in loadNamespace(x): there is no package called ‘progress’ # }  if (FALSE) { # enhance resolution by increasing zoom r2 <- extract_river(outlet=c(637478,237413),   EPSG=21781, #CH1903/LV03 coordinate system   ext=c(6.2e5,6.6e5,2e5,2.5e5),   z=9) plot(r) plot(r2) }  if (FALSE) { # specify two outlets as a data frame (this takes some minutes) r <- extract_river(outlet=data.frame(x=c(637478,629532),y=c(237413,233782)),                     EPSG=21781, #CH1903/LV03 coordinate system                     ext=c(6.2e5,6.6e5,2e5,2.5e5),                     z=10, plot.rast=T) plot(r)  r <- aggregate_river(r) plot(r, chooseCM = 2)  # display only the second catchment  # (i.e. that identified by the second outlet) }  if (FALSE) { # effect of threshold_parameter r <- extract_river(outlet = c(637478, 237413),                     EPSG = 21781, #CH1903/LV03 coordinate system                     ext = c(6.2e5, 6.6e5, 2e5, 2.5e5),                     z = 8, threshold_parameter = 50,             plot.rast = TRUE) plot(r) # if threshold_parameter is too small, the outlet might be located  # in a smaller river reach, and the extracted river network would be too small # plot.rast = TRUE can help identify what is going on  r <- extract_river(outlet = c(637478, 237413),                     EPSG = 21781, #CH1903/LV03 coordinate system                     ext = c(6.2e5, 6.6e5, 2e5, 2.5e5),                     z = 8, threshold_parameter = 1e5,             plot.rast = TRUE) plot(r) # if threshold_parameter is too large, the outlet pixel might not be # located at all (for instance, in this case no cells have contributing area  # above threshold_parameter), hence throwing an error }"},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":null,"dir":"Reference","previous_headings":"","what":"Locate site in a river — locate_site","title":"Locate site in a river — locate_site","text":"Finds location site (coordinates X,Y) within river object.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Locate site in a river — locate_site","text":"","code":"locate_site(X, Y, river, euclidean = TRUE, showPlot = FALSE,    xlim = NULL, ylim = NULL)"},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Locate site in a river — locate_site","text":"X, Y Longitudinal latitudinal coordinates site. must given coordinate system river object. river River object site located. must aggregated (via aggregate_river). euclidean Logical. location site river attributed \"crow flies\"?  FALSE, downstream path (X, Y) followed river network met. showPlot Logical. close-relocated site shown? xlim, ylim Ranges x- y-axis limits plot. active showPlots = TRUE.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Locate site in a river — locate_site","text":"list objects: FDode index FD level node closest (X, Y). generally node belongs river network. RNode index RN level relocated site. AGode index AG level relocated site.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Locate site in a river — locate_site","text":"function identifies node river network (RN AG levels) closest arbitrary site coordinates X, Y. Desired coordinates X, Y can found interactive way clicking river map using  function locator. Nodes RN level thus found can defined new breakpoints reaches (see aggregate_OCN  argument breakpoints).","code":""},{"path":[]},{"path":"https://lucarraro.github.io/rivnet/reference/locate_site.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Locate site in a river — locate_site","text":"","code":"# \\donttest{  fp <- system.file(\"extdata/wigger.tif\", package = \"rivers\")  r <- extract_river(outlet = c(637478, 237413),                     DEM = fp)             #> Error in taudem_exec(n_processes = n_processes, program = \"pitremove\",     args = args, quiet = quiet): ✖ Can't find TauDEM #> ℹ Refer to ?traudem::taudem_sitrep  r <- aggregate_river(r) #> Error in \"slope\" %in% names(OCN$FD): object 'r' not found    X <- 641329; Y <- 227414   locate_site(X, Y, r, showPlot = TRUE) # as the crow flies #> Error in locate_site(X, Y, r, showPlot = TRUE): object 'r' not found  locate_site(X, Y, r, showPlot = TRUE, euclidean = FALSE) # follow downstream path #> Error in locate_site(X, Y, r, showPlot = TRUE, euclidean = FALSE): object 'r' not found  # }    if (FALSE) {  # define X, Y by clicking on the map  fp <- system.file(\"extdata/wigger.tif\", package = \"rivers\")  r <- extract_river(outlet = c(637478, 237413),                     DEM = fp)              r <- aggregate_river(r)  plot(r)    point <- locator(1) # click on the map to define point  locate_site(point$X, point$Y, r)  }"},{"path":"https://lucarraro.github.io/rivnet/reference/paths_river.html","id":null,"dir":"Reference","previous_headings":"","what":"Find paths in a river — paths_river","title":"Find paths in a river — paths_river","text":"Find paths river","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/paths_river.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find paths in a river — paths_river","text":"","code":"paths_river(river, ...)"},{"path":"https://lucarraro.github.io/rivnet/reference/paths_river.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find paths in a river — paths_river","text":"river river object. ... arguments passed aggregate_OCN.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/paths_river.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find paths in a river — paths_river","text":"alias paths_OCN.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/paths_river.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Find paths in a river — paths_river","text":"","code":"# \\donttest{  fp <- system.file(\"extdata/wigger.tif\", package=\"rivers\")  r <- extract_river(outlet=c(637478,237413),   DEM=fp) #> Error in taudem_exec(n_processes = n_processes, program = \"pitremove\",     args = args, quiet = quiet): ✖ Can't find TauDEM #> ℹ Refer to ?traudem::taudem_sitrep r <- aggregate_river(r)   #> Error in \"slope\" %in% names(OCN$FD): object 'r' not found r <- paths_river(r) #> Error in \"RN\" %in% names(OCN): object 'r' not found # }"},{"path":"https://lucarraro.github.io/rivnet/reference/plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot a river — plot","title":"Plot a river — plot","text":"Plots river object","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot a river — plot","text":"","code":"# S4 method for river,numeric plot(x, y, ...) # S4 method for numeric,river plot(y, x, ...) # S4 method for river,missing plot(x, y, ...)"},{"path":"https://lucarraro.github.io/rivnet/reference/plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot a river — plot","text":"x river object. y numeric vector displayed. equivalent theme draw_thematic_OCN. y specified, river must aggregated. See details. ... Arguments passed plotting functions draw_simple_OCN, draw_contour_OCN,  draw_thematic_OCN. See details.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot a river — plot","text":"interface plotting functions draw_simple_OCN, draw_contour_OCN,  draw_thematic_OCN. river object elevation field (.e., generated create_OCN create_general_contour_OCN, landscape_OCN  run), plotting function used draw_simple_OCN. elevation field present, river  aggregated (via aggregate_OCN aggregate_river), plotting function used   draw_contour_OCN. river aggregated,  draw_thematic_OCN used.","code":""},{"path":[]},{"path":"https://lucarraro.github.io/rivnet/reference/plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot a river — plot","text":"","code":"fp <- system.file(\"extdata/wigger.tif\", package=\"rivers\") r <- extract_river(outlet=c(637478,237413),   DEM=fp) #> Error in taudem_exec(n_processes = n_processes, program = \"pitremove\",     args = args, quiet = quiet): ✖ Can't find TauDEM #> ℹ Refer to ?traudem::taudem_sitrep plot(r)  # equivalent to draw_contour_OCN #> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'plot': object 'r' not found  # \\donttest{ r <- aggregate_river(r) #> Error in \"slope\" %in% names(OCN$FD): object 'r' not found plot(r) # equivalent to draw_thematic_OCN #> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'plot': object 'r' not found  # equivalent to draw_thematic_OCN with 'theme' specified plot(r, r$AG$streamOrder, discreteLevels=TRUE)  #> Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'plot': object 'r' not found # }"},{"path":"https://lucarraro.github.io/rivnet/reference/river-class.html","id":null,"dir":"Reference","previous_headings":"","what":"river class — river-class","title":"river class — river-class","text":"river object contains information river attributes different aggregation levels. can represent real river network  (obtained via extract_river) optimal channel network (obtained via create_OCN). content river object can treated list. information aggregation levels content  river object, see OCNet-package.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/rivnet-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract And Analyze Rivers From Elevation Data. — rivnet-package","title":"Extract And Analyze Rivers From Elevation Data. — rivnet-package","text":"Seamless extraction river networks Digital      Elevation Models data. package allows analysis      externally provided DEMs downloaded open source      repositories (thus interfacing 'elevatr' package').      Extraction performed via TauDEM's D8 flow direction algorithm      (thus interfacing 'traudem' package). Resulting river     networks compatible functions 'OCNet' package.","code":""},{"path":"https://lucarraro.github.io/rivnet/reference/rivnet-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Extract And Analyze Rivers From Elevation Data. — rivnet-package","text":"Luca Carraro (luca.carraro@hotmail.)","code":""}]
